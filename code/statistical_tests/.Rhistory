)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_minimal()
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_void()
library("dplyr")
library("readr")
library("ggplot2")
rank_correlations <- read_csv(file="../../data/ESOL/manual_vs_attribution_rank_correlations.csv")
rank_correlations
rank_corr_long <- rank_correlations %>%
select(
"absolute_error_class", "SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr"
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
)
attribution_methods_labels <- c(
"HN_rank_corr" = "HN",
"Shapley_rank_corr" = "Shapley",
"SME_rank_corr" = "SME"
)
absolute_error_class_labels <- c("< 0.6" = "AE < 0.6", ">= 0.6" = "AE >= 0.6")
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_void()
library("tidyr")
library("dplyr")
library("readr")
library("ggplot2")
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_bw()
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_classic()
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_void()
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
theme(strip.text.y = element_text(angle = 0)) +
xlab("Spearman rank correlation") +
theme_bw()+ # set the background theme
theme(panel.grid.major = element_blank(), # remove the major lines
panel.grid.minor = element_blank()) # remove the minor lines
theme(panel.grid.major = element_blank(),
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
theme_bw( )+
panel.grid.major = element_blank(),
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
theme_bw( )+
panel.grid.major = element_blank(),
theme(
rank_corr_long <- rank_correlations %>%
select(
"absolute_error_class", "SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr"
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
)
attribution_methods_labels <- c(
"HN_rank_corr" = "HN",
"Shapley_rank_corr" = "Shapley",
"SME_rank_corr" = "SME"
)
absolute_error_class_labels <- c("< 0.6" = "AE < 0.6", ">= 0.6" = "AE >= 0.6")
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
scale_x_discrete(limits=c("-1", "1")) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
xlim("-1", "1") +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
scale_x_continuous(name="Spearman rank correlation", limits=c(-1, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
x_scale_continuous(breaks=c(-1, 0, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
xlab("Spearman rank correlation") +
scale_x_continuous(breaks=c(-1, 0, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
scale_x_continuous(name = "Spearman rank correlation", breaks = c(-1, 0, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
install.packages("ggpubr")
library("tidyr")
library("dplyr")
library("readr")
library("ggplot2")
library("ggpubr")
rank_corr_long <- rank_correlations %>%
select(
absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
) %>%
convert_as_factor(absolute_error_class, attribution_method)
library("tidyverse")
install.packages("tidyverse")
library("tidyr")
library("dplyr")
library("readr")
library("ggplot2")
library("ggpubr")
rank_corr_long <- rank_correlations %>%
select(
absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
) %>%
convert_as_factor(absolute_error_class, attribution_method)
rank_corr_long <- rank_correlations %>%
select(
absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
)
attribution_methods_labels <- c(
"HN_rank_corr" = "HN",
"Shapley_rank_corr" = "Shapley",
"SME_rank_corr" = "SME"
)
absolute_error_class_labels <- c("< 0.6" = "AE < 0.6", ">= 0.6" = "AE >= 0.6")
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
scale_x_continuous(name = "Spearman rank correlation", breaks = c(-1, 0, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
rank_corr_long <- rank_correlations %>%
select(
absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
) %>%
mutate_at(c('attribution_method', 'absolute_error'), as.factor)
rank_corr_long <- rank_correlations %>%
select(
absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
) %>%
mutate_at(c('attribution_method', 'absolute_error_class'), as.factor)
ggboxplot(selfesteem, x = "time", y = "score", add = "jitter")
ggboxplot(rank_corr_long, x = "attribution_method", y = "rank_corr", add = "jitter")
install.packages("rstatix")
library("rstatix")
rank_corr_long
rank_correlations
rank_correlations %>% rename("...1" = "id")
rank_correlations %>% rename(...1 = id)
help(rename)
rank_correlations %>% rename(...1 = id)
library("tidyr")
library("dplyr")
library("readr")
library("ggplot2")
library("rstatix")
rank_correlations <- read_csv(file="../../data/ESOL/manual_vs_attribution_rank_correlations.csv")
rank_correlations
rank_corr_long <- rank_correlations %>%
select(
absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
) %>%
mutate_at(c('attribution_method', 'absolute_error_class'), as.factor)
attribution_methods_labels <- c(
"HN_rank_corr" = "HN",
"Shapley_rank_corr" = "Shapley",
"SME_rank_corr" = "SME"
)
absolute_error_class_labels <- c("< 0.6" = "AE < 0.6", ">= 0.6" = "AE >= 0.6")
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
scale_x_continuous(name = "Spearman rank correlation", breaks = c(-1, 0, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
rank_correlations %>% rename(...1 = id)
head(rank_correlations)
rank_correlations %>% rename(...1 = id)
rank_correlations %>% rename(id = ...1)
rank_correlations <- read_csv(
file="../../data/ESOL/manual_vs_attribution_rank_correlations.csv"
) %>% rename(id = ...1)
rank_corr_long <- rank_correlations %>%
select(
id, absolute_error_class, SME_rank_corr, Shapley_rank_corr, HN_rank_corr
) %>%
pivot_longer(
names_to = "attribution_method",
values_to = "rank_corr",
cols=c("SME_rank_corr", "Shapley_rank_corr", "HN_rank_corr")
) %>%
mutate_at(c('attribution_method', 'absolute_error_class'), as.factor)
attribution_methods_labels <- c(
"HN_rank_corr" = "HN",
"Shapley_rank_corr" = "Shapley",
"SME_rank_corr" = "SME"
)
absolute_error_class_labels <- c("< 0.6" = "AE < 0.6", ">= 0.6" = "AE >= 0.6")
ggplot(rank_corr_long, mapping = aes(x = rank_corr)) +
geom_histogram(bins=50) +
facet_grid(
absolute_error_class ~ attribution_method,
labeller = labeller(
.cols = attribution_methods_labels,
.rows = absolute_error_class_labels,
)
) +
scale_x_continuous(name = "Spearman rank correlation", breaks = c(-1, 0, 1)) +
theme_bw() +
theme(
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.text.y = element_text(angle = 0)
)
head(rank_corr_long)
help(friedman_test)
attributions_correct_friedman
attributions_correct_friedman
rank_corr_long %>% friedman_test(rank_corr ~ attribution_method | id, alpha=0.01)
rank_corr_long %>% friedman_test(rank_corr ~ attribution_method | id)
%>% filter(absolute_error_class == "< 0.6")
rank_corr_long %>%
filter(absolute_error_class == "< 0.6") %>%
friedman_test(rank_corr ~ attribution_method | id)
rank_corr_long %>%
friedman_test(rank_corr ~ attribution_method | id)
rank_corr_long %>%
summarise()
rank_corr_long %>%
summarise(rank_corr)
rank_corr_long %>%
get_summary_stats(rank_corr)
rank_corr_long %>%
get_summary_stats(rank_corr, type="common")
rank_corr_long %>%
get_summary_stats(rank_corr | attribution_method, type="common")
head(rank_corr_long)
rank_corr_long %>%
group_by(attribution_method) %>%
get_summary_stats(rank_corr, type="common")
rank_corr_long %>%
filter(absolute_error_class == ">= 0.6") %>%
friedman_test(rank_corr ~ attribution_method | id)
friedman_correct_mols <- rank_corr_long %>%
filter(absolute_error_class == "< 0.6") %>%
friedman_test(rank_corr ~ attribution_method | id)
library("knitr")
firedman_incorrect_mols <- rank_corr_long %>%
filter(absolute_error_class == ">= 0.6") %>%
friedman_test(rank_corr ~ attribution_method | id)
knits::kable(friedman_incorect_mols)
knitr::kable(friedman_incorect_mols)
knitr::kable(firedman_incorrect_mols)
knitr::kable(friedman_correct_mols)
friedman_correct_mols <- rank_corr_long %>%
filter(absolute_error_class == "< 0.6") %>%
friedman_test(rank_corr ~ attribution_method | id)
# knitr::kable(friedman_correct_mols)
firedman_incorrect_mols <- rank_corr_long %>%
filter(absolute_error_class == ">= 0.6") %>%
friedman_test(rank_corr ~ attribution_method | id)
# knitr::kable(firedman_incorrect_mols)
